<div class="form-container">
  <div class="form-card">
    <h1>{{ isEditMode ? 'Edit Employee' : 'Add New Employee' }}</h1>

    <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="form-row">
        <div class="form-group">
          <label for="firstName">First Name *</label>
          <input
            id="firstName"
            type="text"
            formControlName="firstName"
            [class.error]="hasError('firstName')" />
          <span class="error-message" *ngIf="getError('firstName', 'First name')">
            {{ getError('firstName', 'First name') }}
          </span>
        </div>

        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input
            id="lastName"
            type="text"
            formControlName="lastName"
            [class.error]="hasError('lastName')" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="email">Email *</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            [class.error]="hasError('email')" />
          <span class="error-message" *ngIf="getError('email', 'Email')">
            {{ getError('email', 'Email') }}
          </span>
        </div>

        <div class="form-group">
          <label for="phone">Phone *</label>
          <input
            id="phone"
            type="tel"
            formControlName="phone"
            [class.error]="hasError('phone')" />
          <span class="error-message" *ngIf="getError('phone', 'Phone')">
            {{ getError('phone', 'Phone') }}
          </span>
        </div>
      </div>

      <div class="form-row">

        <!-- Department Dropdown -->
        <div class="form-group">
          <label for="department">Department *</label>
          <app-sf-dropdown
            id="department"
            placeholder="Select Department"
            [dataSource]="departmentDropdownOptions"
            [fields]="{ text: 'text', value: 'value' }"
            [value]="employeeForm.get('department')?.value || ''"
            (valueChange)="onDepartmentChange($event)">
          </app-sf-dropdown>

          <span class="error-message" *ngIf="getError('department', 'Department')">
            {{ getError('department', 'Department') }}
          </span>
        </div>

        <div class="form-group">
          <label for="position">Position *</label>
          <input
            id="position"
            type="text"
            formControlName="position"
            [class.error]="hasError('position')" />
          <span class="error-message" *ngIf="getError('position', 'Position')">
            {{ getError('position', 'Position') }}
          </span>
        </div>
      </div>

      <div class="form-row">

        <!-- Status Dropdown -->
        <div class="form-group">
          <label for="status">Status *</label>
          <app-sf-dropdown
            id="status"
            placeholder="Select Status"
            [dataSource]="statusDropdownOptions"
            [fields]="{ text: 'text', value: 'value' }"
            [value]="employeeForm.get('status')?.value || ''"
            (valueChange)="onStatusChange($event)">
          </app-sf-dropdown>

          <span class="error-message" *ngIf="getError('status', 'Status')">
            {{ getError('status', 'Status') }}
          </span>
        </div>

        <div class="form-group">
          <label for="hireDate">Hire Date *</label>
          <input
            id="hireDate"
            type="date"
            formControlName="hireDate"
            [class.error]="hasError('hireDate')" />
          <span class="error-message" *ngIf="getError('hireDate', 'Hire date')">
            {{ getError('hireDate', 'Hire date') }}
          </span>
        </div>
      </div>

      <!-- Salary -->
      <div class="form-group">
        <label for="salary">Salary *</label>
        <input
          id="salary"
          type="number"
          formControlName="salary"
          [class.error]="hasError('salary')" />
        <span class="error-message" *ngIf="getError('salary', 'Salary')">
          {{ getError('salary', 'Salary') }}
        </span>
      </div>

      <!-- Image -->
      <div class="form-group">
        <label>Employee Photo</label>
        <app-image-upload
          [previewUrl]="previewUrl"
          (imageSelected)="onImageSelected($event)">
        </app-image-upload>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <app-sf-button type="button" cssClass="e-flat btn-cancel" (clicked)="cancel()">
          Cancel
        </app-sf-button>

        <app-sf-button
          type="submit"
          cssClass="e-primary btn-submit"
          [disabled]="employeeForm.invalid">
          {{ isEditMode ? 'Update Employee' : 'Add Employee' }}
        </app-sf-button>
      </div>
    </form>
  </div>
</div>
